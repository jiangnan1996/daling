/*! fly - v1.0.0 - 2014-12-22
* https://github.com/amibug/fly
* Copyright (c) 2014 wuyuedong; Licensed MIT */

define("utils/cookie",[],function(){var e={read:function(e){var t=document.cookie.match("(?:^|;)\\s*"+e+"=([^;]*)");return t?decodeURIComponent(t[1]):null},write:function(e){var t=e.name+"="+encodeURIComponent(e.value);e.domain&&(t+="; domain="+e.domain),e.path&&(t+="; path="+e.path);if(e.day){var n=new Date;n.setTime(n.getTime()+e.day*24*60*60*1e3),t+="; expires="+n.toGMTString()}if(e.expires){var r=new Date((new Date).getTime()+864e5-((new Date).getHours()*60*60+(new Date).getMinutes()*60+(new Date).getSeconds())*1e3);r.setTime(r.getTime()),t+="; expires="+r.toGMTString()}document.cookie=t;return},dispose:function(e){var t=this.read(e);this.write({name:e,value:t,day:-1});return}};return function(n,r,i){return typeof r!="undefined"?r===null?e.dispose(n):(i=i||{},i.name=n,i.value=r,e.write(i)):e.read(n)}}),define("models/account",["jquery","utils/cookie"],function(e,t){function n(){return e("[data-has-login]").data("has-login")===!0}return{isLogin:n}}),define("utils/stat",["jquery"],function(){function e(e,t,n,r){n==undefined?n="":n,(new Image).src="http://s.daling.com/b.gif?cache="+ +(new Date).getTime()+"&dataClass1="+e+"|"+"dataClass2="+t+"|"+"dataClass3="+n,_hmt.push(["_trackEvent",e,t,n]),ga("send","event",e,t,n)}return function(){if(localStorage.getItem("gaInfo")!=null){var t=JSON.parse(localStorage.getItem("gaInfo"));ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:t.orderId,affiliation:t.orderAffiliation,revenue:t.orderRevenueCurrency,shipping:t.orderShippingCurrency,tax:t.orderTaxCurrency}),$.each(t.goods,function(e,t){ga("ecommerce:addItem",{id:t.Id*1,name:t.Name,sku:t.SKU,category:t.Category,price:t.Price,quantity:t.Quantity*1})}),ga("ecommerce:send"),localStorage.removeItem("gaInfo")}}(),$("body").on("click","[data-stat-desc]",function(t){var n=$(this).attr("data-stat-desc"),r=n.split("-")[0],i=n.split("-")[1],s=n.split("-")[2];e(r,i,s,n)}),e.trackTransaction=function(e){localStorage.setItem("gaInfo",e)},e}),define("utils/validator",["jquery","jquery-validate"],function(e){return e.validator.addMethod("regexp",function(e,t,n){return this.optional(t)||n.test(e)},"格式不正确"),function(t,n,r){e(t).validate(e.extend(n,{submitHandler:r}))}}),define("utils/dsp",["jquery","utils/cookie"],function(e,t){"use strict";function n(t){var n=document.createElement("script"),r=e.Deferred();return n.type="text/javascript",n.src=t,document.getElementsByTagName("body")[0].appendChild(n),n.onload=function(){r.resolve()},r.promise()}var r=n("https://v.behe.com/js/bgnms.js");(function(){r.then(function(){e("body").append('<iframe height="0" width="0" frameborder="0" src="https://v.behe.com/js/0.html"></iframe><script type="text/javascript">beheActiveView({at:"arrive",src:"1697005363",cid:"utm_source=bihe",sid:"2216"});</script>')})})();var i=e("[data-nickname]").data("nickname"),s=e("[data-user-id]").data("user-id");return{trackGoodsView:function(e,t,n,r,i,s,o){},trackCartView:function(){r.then(function(){e("body").append('<script type="text/javascript">beheActiveEvent({at:"buy",src:"1697005363",cid:"utm_source=bihe",sid:"2216.2068"});</script>')})},trackCart:function(e){},trackOrdertView:function(){r.then(function(){e("body").append('<script type="text/javascript">beheActiveEvent({at:"buy_1",src:"1697005363",cid:"utm_source=bihe",sid:"2216.2069"});</script>')})},trackOrder:function(e,t,n){},trackRegister:function(){},trackSuccesstView:function(){r.then(function(){e("body").append('<script type="text/javascript">beheActiveEvent({at:"buy_2",src:"1697005363",cid:"utm_source=bihe",sid:"2216.2070"});</script>')})},zampda:function(){(function(e){var t={query:[],args:e||{}};t.query.push(["_setAccount","614"]),(window.__zpSMConfig=window.__zpSMConfig||[]).push(t);var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.zampda.net/s.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)})(window.__zp_tag_params)}}}),define("widgets/popup",["jquery"],function(e){var t={};return t.open=function(e,n){var r=e.find(".da-dialog-inner");e.show(),r.css({"margin-left":-r.width()/2+"px","margin-top":-r.height()/2+"px"}),e.data("close-handler",function(){n?n():null});if(e.data("dialog-init"))return;e.find(".close,.mask,[data-address-cancel]").on("click",function(){t.hide(e)}),e.data("dialog-init","init")},t.hide=function(e){e.hide(),e.data("close-handler")()},t}),define("widgets/login-panel",["jquery","utils/validator","utils/dsp","widgets/popup"],function(e,t,n,r){return function(i){function h(){var t=o.find("[data-send-code]"),n=o.find("[data-resent]");if(l>0)return;o.find("[name=mobile]").valid()&&o.find("[name=validate]").valid()&&(t.prop("disabled",!0),e.post(o.data("verify-url"),{mobile:o.find("[name=mobile]").val(),validate:o.find("[name=validate]").val(),type:"reg"}).done(function(r){t.prop("disabled",!1);if(!r.status){e("[data-captcha]").click(),e("[data-text-error]").html("*"+r.msg);return}e("[data-text-error]").html(""),l=60,n.show().find(".timer").html(l),t.hide();var i=setInterval(function(){l-=1;if(l>0){n.find(".timer").html(l);return}clearInterval(i),n.hide(),t.show()},1e3)}))}function p(e){c=e||function(){},o.hide(),s.show(),i.find("[data-tab-login]").addClass("active"),i.find("[data-tab-register]").removeClass("active"),i.find("[data-captcha]").click()}function d(e){c=e||function(){},o.show(),s.hide(),i.find("[data-tab-login]").removeClass("active"),i.find("[data-tab-register]").addClass("active"),i.find("[data-captcha]").click()}var s=i.find(".login-form"),o=i.find(".register-form"),u=e("[data-Agreement]").find("input"),a=e("[data-agreement-a]"),f=e("[data-agreement-dialog]"),l=0,c;return u.click(function(){e("[data-Agreement]").find("input:checked").length==1?(e("[data-text-error]").html(""),o.find("[type=submit]").removeClass("dispabled")):o.find("[type=submit]").addClass("dispabled")}),a.click(function(){r.open(f,function(){})}),e("[data-agreement-confirm]").click(function(){e("[data-Agreement]").find("input:checked").length==0&&e("[data-Agreement]").find("input").click(),r.hide(f)}),e("[data-agreement-close]").click(function(){r.hide(f)}),i.delegate("input","focus",function(t){var n=e(t.currentTarget);i.find(".ctrl").removeClass("current"),n.closest(".ctrl").addClass("current")}),i.find("[data-captcha]").click(function(t){var n=e(t.target),r=n.data("src");n.attr("src",r+"&_r="+(new Date).getTime())}),i.find("[data-tab-login]").click(function(){p(c)}),i.find("[data-tab-register]").click(function(){d(c)}),i.find("[data-send-code]").click(h),t(s,{rules:{mobile:{required:!0,regexp:/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/},pass:{required:!0}},messages:{mobile:{required:"请输入手机号",regexp:"请输入正确的手机号码"},pass:{required:"请输入密码"}}},function(n,r){r.preventDefault();var i=s.serialize();e.post(s.attr("action"),i).done(function(t){t.status?(e("[data-text-error1]").html(""),e("[data-has-login]").data("has-login",!0),c()):e("[data-text-error1]").html("*"+t.msg)})}),e(".mobile").each(function(){e(this).keyup(function(){e(this).parents("form").css("display")=="block"&&e(this).val().match(/\s+/g)!=null&&e(this).val(e(this).val().replace(/\s*/g,""))})}),t(o,{rules:{mobile:{required:!0,regexp:/^0?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/},validate:{required:!0},code:{required:!0},pass:{required:!0}},messages:{mobile:{required:"请输入手机号",regexp:"请输入正确的手机号码"},validate:{required:"请输入验证码"},code:{required:"请输入短信验证码"},pass:{required:"请输入密码"}}},function(r,i){i.preventDefault();if(e("[data-Agreement]").find("input:checked").length==0){e("[data-text-error]").html("请接受服务条款");return}var s=o.serialize();o.find("[type=submit]").prop("disabled","disabled"),e.post(o.attr("action"),s).done(function(t){o.find("[type=submit]").prop("disabled",null),t.status?(e("[data-text-error]").html(""),e("[data-has-login]").data("has-login",!0),n.trackRegister(),c()):e("[data-text-error]").html("*"+t.msg)})}),{login:p,register:d}}}),define("widgets/login-dialog",["jquery","widgets/login-panel"],function(e,t){function s(e){n.show(),i.login(function(){n.hide(),e?e():location.reload()})}function o(e){n.show(),i.register(function(){n.hide(),e?e():location.reload()})}var n=e("[data-login-dialog]"),r=n.find(".close"),i=t(n);return r.click(function(){n.hide()}),{login:s,register:o}}),define("utils/shims",[],function(){window.console=window.console||{log:function(){},error:function(){},debug:function(){}}}),define("widgets/header",["jquery","models/account","utils/stat","widgets/login-dialog","utils/dsp","utils/shims"],function(e,t,n,r,i){function a(){e.get("/api/goods/getNavigation",function(t){e("[da-category]").find(".opened").length==0&&e(".da-category .dt").append(t)}),o.find(".ico-up").css("display","none"),o.find(".ico-down").css("display","inline-block")}function l(){e(window).scrollTop()>=f?e("[data-go-top]").fadeIn():e("[data-go-top]").fadeOut()}e.ajaxSetup({cache:!1});var s=e(".da-header");s.find("[data-login]").click(function(){r.login()}),s.find("[data-register]").click(function(){r.register()});var o=e(".da-category"),u=null;o.mouseenter(function(){u=setTimeout(a,300)}).mouseleave(function(){e("[da-category]").find(".opened").length==0&&(e(".da-category").find(".dd").remove(),clearTimeout(u)),o.find(".ico-up").css("display","inline-block"),o.find(".ico-down").css("display","none")}),e("body").click(function(){e("[da-category]").find(".opened").length==0&&e(".da-category").find(".dd").hide(200)});var f=e(window).height();l(),e(window).scroll(function(){l()}),e("[data-go-top]").on("click",function(){e(window).scrollTop(0)}),e("[data-user-menu]").find("a").each(function(){e(this).click(function(){e(this).next("ul").length>0&&e(this).next("ul").slideToggle(200)})}),e(window).load(function(){i.zampda()})}),define("utils/emitter",["jquery","underscore"],function(e,t){function r(e,n){this.prefix=e,t.defaults(this,n)}var n=e(document);return r.prototype.trigger=function(e,t){n.trigger(this.prefix+"."+e,t)},r.prototype.bind=function(e,t){n.bind(this.prefix+"."+e,t.holder=function(e,n){t(n)})},r.prototype.unbind=function(e,t){n.unbind(this.prefix+"."+e,t.holder)},r}),define("widgets/tooltip",["jquery"],function(e){var t,n,r;return function(i){t||(t=e('<div class="da-tooltip"><div class="da-tooltip-bg"></div><div class="da-tooltip-text"></div></div>').hide().appendTo(document.body)),r&&r.resolve(),r=e.Deferred(),n&&clearTimeout(n),t.fadeIn().find(".da-tooltip-text").html(i);var s=t.find(".da-tooltip-text").outerWidth();return t.css({width:s+"px","margin-left":-s/2+"px"}),n=window.setTimeout(function(){t.fadeOut(function(){r.resolve()})},2500),r.promise()}}),define("models/cart",["jquery","underscore","utils/emitter","widgets/tooltip","utils/dsp"],function(e,t,n,r,i){return new n("cart",{addCart:function(n,r){return e.get("/api/cart/add",{gid:n,quantity:r}).then(t.bind(this.notify,this)).then(function(e){return i.trackCart(n),e})},updateCount:function(r,i){return e.get("/api/cart/edit",{gid:r,act:"updnum",quantity:i,r:Math.random()}).then(t.bind(this.notify,this))},delCart:function(r){return e.get("/api/cart/deleteGoods",{goods_id:r,r:Math.random()}).then(t.bind(this.notify,this))},selectCart:function(r,i){return e.get("/api/cart/edit",{gid:r,act:i,r:Math.random()}).then(t.bind(this.notify,this))},selectAll:function(r){return e.get("/api/cart/edit",{act:r,r:Math.random()}).then(t.bind(this.notify,this))},delSelect:function(r){return e.get("/api/cart/deleteGoods",{r:Math.random(),goods_id:r}).then(t.bind(this.notify,this))},notify:function(e){return e.status===!1?(r(e.msg),e):(this.trigger("update",e),e)},setChanges:function(n){return e.post("/api/cart/setChangeGoods",{change_goods_ids:n.join(",")}).then(t.bind(this.notify,this))},delChanges:function(n){return e.post("/api/cart/deleteChangeGoods",{gid:n}).then(t.bind(this.notify,this))}})}),define("widgets/share",["jquery"],function($){return function(){var share=[],common={};$("[data-share-btn]").each(function(e,t){var n=$(t);share.push({tag:n.data("tag"),bdSize:16}),n.data("share-img")&&(common.bdPic=n.data("share-img")),n.data("share-text")&&(common.bdText=n.data("share-text")),n.data("share-description")&&(common.bdDesc=n.data("share-description"),common.bdComment=n.data("share-description")),n.data("share-url")&&(common.bdUrl=n.data("share-url"))}),window._bd_share_config={common:common,share:share};with(document)(0)[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion="+~(-(new Date)/36e5)]}}),define("widgets/prompt",["jquery"],function(e){function r(r,i,s){var o=t.find(".da-dialog-inner"),u=e.Deferred();return t.find("[data-message]").html(r),t.find("[data-btn-cancel]").html(i),t.find("[data-btn-confirm]").html(s),t.show(),o.css({"margin-left":-o[0].offsetWidth/2+"px","margin-top":-o[0].offsetHeight/2+"px"}),n&&n.resolve(!1),n=u,u.promise()}function i(){n.resolve(!0),t.hide()}function s(){n.resolve(!1),t.hide()}var t=e("[data-widget-prompt]"),n=null;return t.find("[data-widget-close]").click(s),t.find("[data-btn-cancel]").click(s),t.find("[data-btn-confirm]").click(i),function(t,n,i){return r(t,n,i)}}),define("widgets/cart",["jquery","underscore","models/cart","widgets/tooltip","widgets/share","widgets/header","widgets/prompt"],function(e,t,n,r,i,s,o){function u(t,r,i){function u(){s&&s.abort(),e.get("/api/cart/views",{is_mini:r?1:0}).then(function(n){var r=e(n),o=t.find(".cart-table");s=null,o.size()>0?o.replaceWith(r):t.append(r),a(),i(r.data("total-price"),r.data("total-reduce"),r.data("total-count"),r.data("goods-amount"),r.data("goods-count"))})}function a(){t.find("[data-sel-group]").each(function(t,n){var r=e(n),i=r.closest(".cart-list").find("[data-goods]"),s=!0;i.each(function(t,n){var r=e(n).find("[data-cart-select]");!r.is(":checked")&&!r.is(":disabled")&&(s=!1)}),s&&r.prop("checked",!0)});var n=!0;t.find("[data-cart-select]").each(function(t,r){var i=e(r);!i.is(":checked")&&!i.is(":disabled")&&(n=!1)}),t.find("[data-sel-all]").prop("checked",n)}function f(){t.find("[data-remainder-time]").each(function(t,n){var r=e(n),i=parseInt(r.data("remainder-time")),s;if(i<=0)return;s=parseInt(r.data("remainder-timeout")||i),r.find(".day").html(Math.floor(s/86400)),r.find(".hour").html(Math.floor(s%86400/3600)),r.find(".minute").html(Math.floor(s%3600/60)),r.find(".second").html(s%60),r.data("remainder-timeout",s-1)})}var s=null;return n.bind("update",u),t.delegate("[data-cart-add]","click",function(t){var r=e(t.currentTarget),i=r.closest("[data-goods]");n.updateCount(i.data("goods"),r.data("cart-quantity"))}),t.delegate("[data-cart-sub]","click",function(t){var r=e(t.currentTarget),i=r.closest("[data-goods]");if(r.data("cart-quantity")==0)return;n.updateCount(i.data("goods"),r.data("cart-quantity"))}),t.delegate("[data-cart-del]","click",function(t){var i=e(t.currentTarget),s=i.closest("[data-goods]");if(r){n.delCart(s.data("goods"));return}o("确定删除商品？","保留商品","确定删除").done(function(e){if(!e)return;n.delCart(s.data("goods"))})}),t.delegate("[data-cart-select]","click",function(t){var r=e(t.currentTarget),i=r.closest("[data-goods]");r.is(":checked")?n.selectCart(i.data("goods"),"select"):n.selectCart(i.data("goods"),"unselect")}),t.delegate("[data-add-cart]","click",function(t){var r=e(t.currentTarget),i=r.closest("[data-goods]");n.addCart(i.data("goods"))}),t.delegate("[data-sel-all]","click",function(t){var r=e(t.currentTarget);r.is(":checked")?n.selectAll("selectall"):n.selectAll("unselectall")}),t.delegate("[data-del-select]","click",function(r){if(t.find("[data-cart-select]:checked").size()==0)return;var i="";t.find("[data-cart-select]:checked").each(function(r){r==t.find("[data-cart-select]:checked").size()-1?(i+=e(this).parents("ul").attr("data-goods"),n.delSelect(i)):i+=e(this).parents("ul").attr("data-goods")+","})}),t.delegate("[data-sel-group]","click",function(t){var n=e(t.currentTarget),r=n.closest(".cart-list").find("[data-goods]"),i=n.is(":checked"),s=[];r.each(function(t,n){s.push(e(n).data("goods"))}),e.get("/api/cart/edit",{gid:s.join(","),act:i?"selectgroup":"unselectgroup",r:Math.random()}).done(u)}),t.delegate("[data-count-input]","change",function(t){var r=e(t.target),i=r.val(),s=r.closest("[data-goods]").data("goods");n.updateCount(s,i).then(function(e){e.status===!1&&r.val(r[0].defaultValue)})}),t.find(".cart-table").size()>0?a():u(),f(),setInterval(f,1e3),{refresh:u}}return u}),define("utils/fly",["jquery"],function(e){(function(){var e=0,t=["webkit","moz"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),function(e){e.fly=function(t,n){var r={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:e.noop},i=this,s=e(t);i.init=function(e){this.setOptions(e),!!this.settings.autoPlay&&this.play()},i.setOptions=function(t){this.settings=e.extend(!0,{},r,t);var n=this.settings,i=n.start,o=n.end;s.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=o.width&&null!=o.height&&e.extend(!0,i,{width:s.width(),height:s.height()});var u=Math.min(i.top,o.top)-Math.abs(i.left-o.left)/3;u<n.vertex_Rtop&&(u=Math.min(n.vertex_Rtop,Math.min(i.top,o.top)));var l=Math.sqrt(Math.pow(i.top-o.top,2)+Math.pow(i.left-o.left,2)),c=Math.ceil(Math.min(Math.max(Math.log(l)/.05-75,30),100)/n.speed),h=i.top==u?0:-Math.sqrt((o.top-u)/(i.top-u)),p=(h*i.left-o.left)/(h-1),v=o.left==p?0:(o.top-u)/Math.pow(o.left-p,2);e.extend(!0,n,{count:-1,steps:c,vertex_left:p,vertex_top:u,curvature:v})},i.play=function(){this.move()},i.move=function(){var t=this.settings,n=t.start,r=t.count,i=t.steps,o=t.end,u=n.left+(o.left-n.left)*r/i,l=0==t.curvature?n.top+(o.top-n.top)*r/i:t.curvature*Math.pow(u-t.vertex_left,2)+t.vertex_top;if(null!=o.width&&null!=o.height){var c=i/2,h=o.width-(o.width-n.width)*Math.cos(c>r?0:(r-c)/(i-c)*Math.PI/2),p=o.height-(o.height-n.height)*Math.cos(c>r?0:(r-c)/(i-c)*Math.PI/2);s.css({width:h+"px",height:p+"px","font-size":Math.min(h,p)+"px"})}s.css({left:u+"px",top:l+"px"}),t.count++;var d=window.requestAnimationFrame(e.proxy(this.move,this));r==i&&(window.cancelAnimationFrame(d),t.onEnd.apply(this))},i.destory=function(){s.remove()},i.init(n)},e.fn.fly=function(t){return this.each(function(){void 0==e(this).data("fly")&&e(this).data("fly",new e.fly(this,t))})}}(e)}),define("widgets/stock-notify",["jquery","models/account","widgets/login-dialog","widgets/tooltip"],function(e,t,n,r){return function(i){(function s(){return t.isLogin()?e.post("/api/notify/set",{goods_id:i}).done(function(e){return e.status===!1?r("添加失败"):r("设置提醒成功，货到时会第一时间通知您")}):n.login(function(){s().then(function(){location.reload()})})})()}}),define("widgets/sidebar",["jquery","widgets/cart","models/cart","utils/fly","widgets/login-dialog","widgets/stock-notify"],function(e,t,n,r,i,s){function c(){o.width()<320&&o.animate({width:"320px"}),e(".sidebar-btn").removeClass("active"),e("[data-sidebar-hide]").css("display","block"),e(".goTop").css("display","none"),e("body").css("overflow","hidden"),e(".sidebar-show").css("display","none"),e(".sidebar-btn").attr("data-show-num",0)}function h(){c(),e(".sb-cart").addClass("active").attr("data-show-num",1),e(".cart-mini").css("display","block"),g()}function p(){c(),e(".sb-promo").addClass("active").attr("data-show-num",1),e(".sidebar-coupon").css("display","block"),e.get("/api/login/isLogin").done(function(t){t.status==1?b():(e(".sb-coupon-contain").css("display","none"),e("[data-coupon-login]").css("display","block"),m(".sb-unlogin",50))})}function d(){c(),e(".sb-collect").addClass("active").attr("data-show-num",1),e(".sidebar-collect").css("display","block"),e.get("/api/login/isLogin").done(function(t){t.status==1?S():(e(".sb-collect-contain").css("display","none"),e("[data-collect-login]").css("display","block"),m(".sb-unlogin",50))})}function v(){if(o.width()<320)return;o.animate({width:"40px"}),e(".goTop").css("display","block"),e("[data-sidebar-hide]").css("display","none"),e(".sidebar-btn").attr("data-show-num",0).removeClass("active"),e("body").css("overflow","auto")}function g(){f.refresh(),m("[data-cart-mini-ct]",148)}function y(t,n,r){var i=e(t),s=e(".sidebar-data").find(n.eleAdd);s.size()>0?(s.replaceWith(i),m(n.eleResize,r)):(e(n.eleBox).append(i),m(n.eleResize,r))}function b(){e(".sb-coupon-contain").css("display","block"),e("[data-coupon-login]").css("display","none"),e.get("/api/coupon/active?from_index=1").done(function(e){y(e,{eleAdd:".sb-coupon-main",eleBox:".sb-coupon-contain",eleResize:".sb-coupon-list"},220)})}function w(){e.get("/api/coupon/old?from_index=1").done(function(e){y(e,{eleAdd:".sb-coupon-main",eleBox:".sb-coupon-contain",eleResize:".sb-coupon-list"},220)})}function E(){e.get("/api/coupon/used?from_index=1").done(function(e){y(e,{eleAdd:".sb-coupon-main",eleBox:".sb-coupon-contain",eleResize:".sb-coupon-list"},220)})}function S(){e(".sb-collect-contain").css("display","block"),e("[data-collect-login]").css("display","none"),e.get("/api/love/getmylist").done(function(e){y(e,{eleAdd:".sb-collect-main",eleBox:".sb-collect-content",eleResize:".sb-collect-content"},50)})}function x(t,r,i,s,o){n.addCart(t,r).then(function(t){if(!t.status)return!1;var n=i,r=s,u=e(window).scrollTop(),a=e("[data-cart-toggle]"),f=a.offset().left,l=a.offset().top-u,c=e("<img src="+o+' style="border-radius:25px;width: 50px;height:50px;width: 50px;height:50px;display: block;z-index:999;" />');c.fly({start:{left:n,top:r},end:{left:f,top:l,width:0,height:0}})})}function T(){return"ActiveXObject"in window}var o=e("[data-sidebar]"),u=o.find("[data-cart-mini]"),a=o.find("[data-cart-mini-ct]"),f,l=null;o.delegate(".sb-more","click",function(t){$el=e(t.currentTarget),$el.closest("[data-toggle-list]").height()<300?(e("[data-toggle-hide]").hide(),e(".sb-more").text("查看更多"),$el.closest("[data-toggle-list]").find("li").show(),$el.text("收起")):($el.closest("div").find("[data-toggle-hide]").hide(),$el.text("查看更多"))}),o.click(function(e){e.stopPropagation()}),e("body").click(function(){v()}),o.delegate(".sb-cart","click",function(t){t.stopPropagation(),e(this).attr("data-show-num")==0?h():v()}),o.delegate(".sb-promo","click",function(t){t.stopPropagation(),e(this).attr("data-show-num")==0?p():v()}),o.delegate(".sb-collect","click",function(t){t.stopPropagation(),e(this).attr("data-show-num")==0?d():v()}),o.delegate("[data-tab-active]","click",function(e){e.stopPropagation(),b()}),o.delegate("[data-tab-old]","click",function(e){e.stopPropagation(),w()}),o.delegate("[data-tab-used]","click",function(e){e.stopPropagation(),E()}),o.delegate(".submit-btn","click",function(e){i.login()}),o.find("[data-sidebar-hide]").click(function(e){e.stopPropagation(),v()}),f=t(a,!0,function(t,n,r,i,s){u.find("[data-cart-count]").html(r),u.find("[data-cart-amount]").html(i),o.find("[data-cart-count]").html(s),e("[da-header-cart-count]").html(s),u.find(".cart-bar")[s==0?"hide":"show"]()});var m=function(t,n){var r=e(window).height()-n+"px";e(t).height(r)};return e(window).resize(function(){m("[data-cart-mini-ct]",148),m(".sb-coupon-list",220),m(".sb-collect-content",50),m(".sb-unlogin",50)}),o.delegate("[data-add-cart]","click",function(t){t.preventDefault();var n=e(window).scrollTop();if(T())var r=e(this).offset().left+(e(this).width()-50)/2,i=e(this).offset().top-n-90;else var r=e(this).offset().left+(e(this).width()-50)/2,i=e(this).offset().top-n-50;var s=e(t.currentTarget).data("goods-img"),o=e(t.currentTarget).data("add-cart");x(o,1,r,i,s)}),o.delegate("[data-stock-notify]","click",function(t){var n=e(t.currentTarget);t.preventDefault(),s(n.data("stock-notify"))}),{addCart:x,hideSidebar:v}}),define("widgets/pagination",["jquery","underscore"],function(e,t){return function(r,i){function c(t){var n=i(e(t.target).data("page"));console.log(n)}var s=r.find("[data-pagination-list]").empty(),o=e("<ul></ul>").appendTo(s),u,a,f=r.data("pagination"),l=r.data("current");if(f==1)return;l>1&&e('<a href="javascript:;" class="pre page-link">上一页</a>').data("page",l-1).insertBefore(o).click(c),t.each(t.range(f),function(t){var n=t+1,r;if(f>9&&n>1&&n<f&&(n>l+2||n<l-2)){if(n<l){if(u)return;u=e('<li class="ellipsis">...</li>').appendTo(o)}else{if(a)return;a=e('<li class="ellipsis">...</li>').appendTo(o)}return}r=e('<li class="page-link">'+(t+1)+"</li>").data("page",t+1).appendTo(o),n==l?r.addClass(l==t+1?"current":""):r.click(c)}),l<f&&e('<a href="javascript:;" class="next page-link">下一页</a>').data("page",l+1).insertAfter(o).click(c)}}),require(["jquery","widgets/header","widgets/sidebar","models/cart","utils/fly","widgets/stock-notify","widgets/pagination","utils/dsp"],function(e,t,n,r,i,s,o,u){e(function(){function i(){return"ActiveXObject"in window}function l(){f.each(function(e){f.eq(e).height()>34&&f.eq(e).closest("li").find(".sort-more").show().css("visibility","visible")})}function S(e){v=e,m=g=w=h="",E={},O()}function x(e){m=e,g=w=h="",E={},O()}function T(e){g=e,w=h="",E={},O()}function N(e,t){w=h="",E[e]=t.join(","),O()}function C(e){h=e,w="",O()}function k(e){d=e,w="",O()}function L(e){w=e,O()}function A(e){b=e,O()}function O(){location.href=c+"&catid="+v+"&group="+m+"&cat="+g+"&keyword="+h+"&page="+w+"&sort="+b+"&stock="+d+"&proid="+p+"&tags="+y+"&"+function(){return e.map(E,function(e,t){return t+"="+e}).join("&")}()}var t=e(".da-search"),r=function(t){t.delegate("li","click",function(n){var r=e(n.currentTarget),i=r.html(),s=t.closest(".sort").find(".sort-name");s.html(i)})};t.find("[data-searched-del]").click(function(t){N(e(t.target).data("searched-del"),[])}),t.find("[data-search-submit]").click(function(t){C(e("[data-search-content]").val())}),t.find("[data-param]").click(function(t){var n=e(t.currentTarget);N(n.data("param"),[n.data("param-value")])}),t.find("[data-stock-notify]").click(function(t){var n=e(t.currentTarget);t.preventDefault(),s(n.data("stock-notify"))}),t.find("[data-cat-1]").click(function(t){S(e(t.currentTarget).data("cat-1"))}),t.find("[data-cat-2]").click(function(t){T(e(t.currentTarget).data("cat-2"))}),t.find("[data-group]").click(function(t){x(e(t.currentTarget).data("group"))}),t.find("[data-page-pre]").click(function(e){L(w-1)}),t.find("[data-page-next]").click(function(e){L(w+1)}),t.find("[data-sort]").click(function(t){t.stopPropagation(),A(e(t.currentTarget).data("sort"))}),t.find("[data-toggle-stock]").click(function(t){k(e(t.currentTarget).is(":checked")?1:0)}),o(t.find("[data-pagination]"),function(e){w=e,O()}),t.delegate("[data-add-cart]","click",function(t){t.preventDefault();var r=e(window).scrollTop();if(i())var s=e(this).offset().left+(e(this).width()-50)/2,o=e(this).offset().top-r-90;else var s=e(this).offset().left+(e(this).width()-50)/2,o=e(this).offset().top-r-50;var u=e(t.currentTarget).data("goods-img"),a=e(t.currentTarget).data("add-cart");n.addCart(a,1,s,o,u)}),t.delegate(".sort","click",function(t){var n=e(t.currentTarget),i=n.find(".drop");return i.is(":hidden")?i.show():i.hide(),r(i),!1}),e("body").click(function(){t.find(".drop").hide()});var u=t.find(".sort-more"),a=t.find(".sort-mul"),f=t.find(".select-inner");l(),u.each(function(t){u.eq(t).click(function(){e(this).closest("li").hasClass("show")?(e(this).find(".text-more").html("更多"),e(this).find(".ico-d-4-7").attr("class","ico-r-4-7"),e(this).closest("li").removeClass("show")):(e(this).find(".text-more").html("收起"),e(this).find(".ico-r-4-7").attr("class","ico-d-4-7"),e(this).closest("li").addClass("show"))})}),a.each(function(t,n){e(n).click(function(){e(this).closest("li").siblings("li").removeClass("select"),e(this).closest("li").hasClass("select")?(e(this).closest("li").removeClass("select"),l()):(e(this).closest("li").addClass("select"),e(this).siblings(".sort-more").css("visibility","hidden")),e(".search-cancle").eq(t).click(function(){e(this).closest("li").removeClass("select"),l()})})}),e(".search-sure").click(function(t){var n=e(t.target).closest("[data-con-name]"),r=n.find("input:checked"),i=[];r.each(function(t,n){i.push(e(n).data("con-alt"))}),N(n.data("con-name"),i)});var c=t.data("search-url"),h=t.data("search-keyword"),p=t.data("search-pro"),d=t.data("search-stock"),v=t.data("search-catid"),m=t.data("search-group"),g=t.data("search-cat"),y=t.data("search-tags"),b=t.data("search-sort"),w=t.data("search-page"),E={};t.find("[data-query]").each(function(t,n){var r=e(n);E[r.attr("name")]=r.val()});var M=function(){var n=t.find(".searchlist li"),r=0,i=[];return n.each(function(t){e(this).data("search-stock")>0&&r<10&&(i.push(e(this).find(".search-img").attr("href").match(/-(.+)\./)[1]),r++)}),i.toString()}();(function(){window.__zp_tag_params={pagetype:"listPage",productId_list:M}})()})}),define("apps/search",function(){});